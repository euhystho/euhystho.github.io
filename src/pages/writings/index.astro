---
import { getCollection } from "astro:content";
import { filterPosts, getURL } from "../../utils/utils";
import BlogCard from "../../components/blog/blogCard.astro";
import BlogLayout from "../../components/layouts/BlogLayout.astro";
import Noposts from "src/components/blog/NoPosts.astro";

const contentType = "writings";
const allPosts = await getCollection(contentType);
const filteredPosts = filterPosts(allPosts);
---

<BlogLayout
  type={contentType}
  description="Explore my academic writings spanning current developments, ethics, and ongoing topics."
>
  {
    filteredPosts.length === 0 ? (
      <Noposts />
    ) : (
      filteredPosts.map((post) => (
        <BlogCard
          frontmatter={post.data}
          url={getURL(post.id, contentType)}
          type={contentType}
        />
      ))
    )
  }
  <aside slot="navigation"></aside>
</BlogLayout>
