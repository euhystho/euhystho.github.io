---
import { getCollection } from "astro:content";
import { filterPosts, getURL } from "../../utils/utils";
import BlogCard from "../../components/blog/blogCard.astro";
import BlogLayout from "../../components/layouts/BlogLayout.astro";
import Noposts from "src/components/blog/NoPosts.astro";

const contentType = "projects";
const allPosts = await getCollection(contentType);
const filteredPosts = filterPosts(allPosts);
---

<BlogLayout
  type={contentType}
  description="Explore my technical projects spanning web development, software engineering, and data science."
>
  {
    filteredPosts.length === 0 ? (
      <Noposts />
    ) : (
      filteredPosts.map((post) => (
        <BlogCard
          frontmatter={post.data}
          url={getURL(post.id, contentType)}
          type={contentType}
        />
      ))
    )
  }
</BlogLayout>
